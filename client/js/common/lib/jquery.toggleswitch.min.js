/* 
Title:      Toggle Switch
URL:        http://github.com/jamiebicknell/Toggle-Switch
Author:     Jamie Bicknell
Twitter:    @jamiebicknell
Thanks:     @steve228uk for prop/var mods and plugin suggestion
*/

(function(e){e.fn.toggleSwitch=function(t){var n=e.extend({onClick:function(){},onChangeOn:function(){},onChangeOff:function(){}},t);e(this).each(function(t){var r=e(this),i=r.is(":checked")?"":" off";if(!r.parent("div.switch").length){r.wrap('<div class="switch"></div>');r.parent("div.switch").prepend('<span class="switched'+i+'" />').prepend('<div class="overlay" />')}r.parent("div.switch").add(e("label[for="+r.prop("id")+"]")).click(function(t){t.preventDefault();if(!r.prop("disabled")){var i,s;n.onClick.call(r);if(e(this).is("label")){i=e("#"+e(this).prop("for")).prev("span.switched");s=e("#"+e(this).prop("for"))}else{i=e(this).children("span.switched");s=e(this).children("input[type=checkbox]")}if(i.is(".off")){i.stop().animate({left:0},150,'linear').removeClass("off");s.prop("checked","checked");n.onChangeOn.call(r)}else{i.stop().animate({left:-21},150,'linear').addClass("off");s.prop("checked","");n.onChangeOff.call(r)}}})})}})(jQuery)